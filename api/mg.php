<?php
$channel_ids = array(
    'cctv1' => 'c74966f7109bc090b8b9f234bec5884f', // CCTV1
    'cctv2' => '1434bac241017d9eb89485bc80491bf6', // CCTV2
    'cctv3' => '5099c074952bff8ba34c81acbaa33ea7', // CCTV3    
    'cctv4' => 'db976f7874fa07b13dff464bd707b0f2', // CCTV4
    'cctv5' => '76d49a7fe74ad80d13a65e566fbaff03', // CCTV5
    'cctv5jia' => '49ffa6abb7be07ff004933081062887a', // CCTV5+
    'cctv6' => '9c33ef39a294f72a3913b1fddc93f9f7', // CCTV6
    'cctv7' => '998130516f61f987a32f5b05e9058ee9', // CCTV7
    'cctv8' => '58b791dae3e0541536bd15d22419bf65', // CCTV8
    'cctv9' => 'a48b656035c62d77e272ea987b5690f6', // CCTV9
    'cctv10' => '50c2aba67e0291cd497bf36f377fbbff', // CCTV10
    'cctv11' => '69f3e78a39ec1f0d65f2ddb8d98a12a6', // CCTV11
    'cctv12' => '6a822ccee011fee0d96a46bed23bf8d6', // CCTV12
    'cctv13' => '7619bb0ac390807471fc508a34eeea40', // CCTV13
    'cctv14' => '6c55832ac08e5223cbf79aac6dec5d98', // CCTV14
    'cctv15' => '452cc8ca57be9f52bfd55f60de90d02c', // CCTV15
    'cctv17' => '4a755c47b7a7321bd9edcefce8923e16', // CCTV17
    'cctv4mei' => '45de6fabfc0d9dfd41de6ad5022d8fce', // CCTV4美洲
    'cctv4ou' => '66e1470c453536359985b7b9b8222742', // CCTV4欧洲
    'cgtndj' => '2b367141a90690336f104070714145c9', // CGTN纪录
    'cgtndy' => 'ee049d44093ce170db64b51eac1d2f78', // CGTN阿拉伯语
    'cgtneb' => '3c4159bb5d8e37eed4f459dd2d270871', // CGTN西班牙语
    'cgtnfy' => 'ca968e30d75e97aee66814d079acd6fd', // CGTN法语
    'cgtney' => '65c5ecaf4809d2ecadab18660c3ac6eb', // CGTN俄语
    'lgsg' => '70cf3f0edac1667cd62bf1186e45f206', // 老故事
    'fxzj' => '6f19caa8cc3798293fb98195ece4c1e6', // 发现之旅
    'zxs' => '75fe4a331b8f71e5638eec115904f943', // 中学生
    'dfws' => '50d94286a91a54aa991d852b86a3ec88', // 东方卫视
    'jsws' => '1929b19850d7a3046952b8d9bd198b23', // 江苏卫视
    'gdws' => 'ce95a4ed1526e2d1e6c4629a20682f2f', // 广东卫视
    'jxws' => '72e0faff01af71d26ea8ba4c62d4c23e', // 江西卫视
    'hns' => '30fcb62a15de6e22fbc4efde97cb6791', // 河南卫视
    'sxs' => 'ff120dae8b23e2cb5a7b8c7c65bd4123', // 陕西卫视
    'dqyws' => '414ce03a3640f44a4db96f6d485be5dc', // 大湾区卫视
    'hbs' => '87759623cbae83d727b06f6f0040c71d', // 湖北卫视
    'jlws' => '631c36ff41a50d7a9891023938d7359d', // 吉林卫视
    'qhs' => 'e5007c41aa833a230096acbaa762b5b9', // 青海卫视
    'dnws' => 'e1f45a56760a590902a1a2ef4859667f', // 东南卫视
    'hnsj' => 'b756ac65ac87ef1a7f622bbaaede61ad', // 海南卫视
    'hxws' => '98395285f1edf12ae051f6e22728faca', // 海峡卫视
    'yxfy' => '4403927ae89dbd01ffe02435d43ccb04', // 游戏风云
    'sszjd' => '61173763da81b7fd481c139cd937baa4', // 赛事最经典
    'ttmjh' => '1856b9463ef16955a84bdcb5d228a705', // 体坛名栏汇
    'shdy' => '7ac18dfabc3748a867e2dc5d3e5a2cf0', // 四海钓鱼
    'mg24ss' => 'a09b6f2eb7db171693f6636d9c62449c', // 咪咕24小时体育台
    'xpfft' => '15d1c8a8183b145e6745be48d7059f76', // 新片放映厅
    'zjsgn' => '44a344a64dc596ddcf881cafb07ea0bd', // 追剧少女
    'chcjy' => 'e6895ae6ea914ba368da69e487408ecd', // CHC家庭影院
    'chcdx' => '3247643c60213697372e32d226c8478a', // CHC动作电影
    'rjlb' => '046fd4eaec6d314a4982fc4172cba1cb', // 热剧联播
    'gdp' => '332b32f046c3b56d5f2b46b195f1e02d', // 高清大片
    'mgysy' => '008c639dafcd273f4000ce8bcbce45f9', // 咪咕云上电影院
    'jsjy' => 'ee28a5df59d890bf587bef808ba74bd4', // 江苏教育
    'sdjy' => 'cd6c31618254f5c2aad8333bc2e3502e', // 山东教育
    'xmpdgt' => 'a55d5f8ab3b8842010392956097c991b', // 熊猫频道高清
    'xmpd1' => 'b8e11cd84e1d5499396d0e0490ae64e1', // 熊猫频道1
    'xmpd2' => '2162d220637a98d7f7eb2e2bd805ec9e', // 熊猫频道2
    'xmpd3' => '0469f423ebaf7a3ade269dcc87121f58', // 熊猫频道3
    'xmpd4' => '25505275d0c1a786d886b68cd8af56f5', // 熊猫频道4
    'xmpd5' => '59ae2678f9fa0c2fc411b2830ec45bd2', // 熊猫频道5
    'xmpd6' => 'd451ec9b7b06cf6c004fcfdc62ced933', // 熊猫频道6
    'xmpd7' => 'c4382c98e155adb1e474f027288d5919', // 熊猫频道7
    'xmpd8' => '23131da84b625220c07232ae17d67d00', // 熊猫频道8
    'xmpd9' => '3bd5ca39cf59f5766ee6fd2e4af5645c', // 熊猫频道9
    'xmpd10' => 'cdfe84bb4e5336529b9ed93c43e357d7', // 熊猫频道10
    'ypjy' => '017ef627d5468a6c50491c559ed64ed7', // Y+
    'ssxwzh' => 'f77dcfe77101c1e564f29fec9e1ab4a7', // 嵊泗新闻综合
    'ptds' => '7a44b203aa4d4aab2f4485c818a16157', // 普陀电视台
    'hzzh' => '1fd79da6a57f5d4a4873ef446fca278d', // 杭州综合
    'hzxhmm' => '741b500636fcae187d092162c40b8406', // 杭州西湖明珠
    'hzshgq' => '2a547789f6b782394fb20f3adef2f9af', // 杭州生活高清
    'hzys' => 'b46acd33cd3059ff2d4dc4ebecfabcd1', // 杭州影视
    'hzet' => 'ae798c1af22b8f51f4b99eb82968383', // 杭州少儿
    'qzggpd' => 'ebee4991bd7da2a07f23e847a99817a6', // 衢州公共频道
);
$channel = isset($_GET['id']) ? $_GET['id'] : 'cctv6';
if (array_key_exists($channel, $channel_ids)) {
    $id = $channel_ids[$channel];
    $u = "http://aikanvod.miguvideo.com/video/p/live.jsp?user=guest&channel=$id&isEncrypt=1";
    $c = @file_get_contents($u);
    
    if ($c !== false && preg_match('/source src="(.+?)"/', $c, $m)) {
        header('Access-Control-Allow-Origin: *');
        header('Location: ' . $m[1]);
        exit;
    }
}
header('HTTP/1.0 404 Not Found');
echo '未找到指定频道';
?>

/*  可能有的看不了，提示要去咪咕爱看的app看，如CCTV1、CCTV2，先留着，将来也许能看。
CCTV1,http://localhost/mg.php?id=cctv1
CCTV2,http://localhost/mg.php?id=cctv2
CCTV3,http://localhost/mg.php?id=cctv3
CCTV4,http://localhost/mg.php?id=cctv4
CCTV5,http://localhost/mg.php?id=cctv5
CCTV5+,http://localhost/mg.php?id=cctv5jia
CCTV6,http://localhost/mg.php?id=cctv6
CCTV7,http://localhost/mg.php?id=cctv7
CCTV8,http://localhost/mg.php?id=cctv8
CCTV9,http://localhost/mg.php?id=cctv9
CCTV10,http://localhost/mg.php?id=cctv10
CCTV11,http://localhost/mg.php?id=cctv11
CCTV12,http://localhost/mg.php?id=cctv12
CCTV13,http://localhost/mg.php?id=cctv13
CCTV14,http://localhost/mg.php?id=cctv14
CCTV15,http://localhost/mg.php?id=cctv15
CCTV17,http://localhost/mg.php?id=cctv17
CCTV4美洲,http://localhost/mg.php?id=cctv4mei
CCTV4欧洲,http://localhost/mg.php?id=cctv4ou
CGTN纪录,http://localhost/mg.php?id=cgtndj
CGTN阿拉伯语,http://localhost/mg.php?id=cgtndy
CGTN西班牙语,http://localhost/mg.php?id=cgtneb
CGTN法语,http://localhost/mg.php?id=cgtnfy
CGTN俄语,http://localhost/mg.php?id=cgtney
老故事,http://localhost/mg.php?id=lgsg
发现之旅,http://localhost/mg.php?id=fxzj
中学生,http://localhost/mg.php?id=zxs
东方卫视,http://localhost/mg.php?id=dfws
江苏卫视,http://localhost/mg.php?id=jsws
广东卫视,http://localhost/mg.php?id=gdws
江西卫视,http://localhost/mg.php?id=jxws
河南卫视,http://localhost/mg.php?id=hns
陕西卫视,http://localhost/mg.php?id=sxs
大湾区卫视,http://localhost/mg.php?id=dqyws
湖北卫视,http://localhost/mg.php?id=hbs
吉林卫视,http://localhost/mg.php?id=jlws
青海卫视,http://localhost/mg.php?id=qhs
东南卫视,http://localhost/mg.php?id=dnws
海南卫视,http://localhost/mg.php?id=hnsj
海峡卫视,http://localhost/mg.php?id=hxws
游戏风云,http://localhost/mg.php?id=yxfy
赛事最经典,http://localhost/mg.php?id=sszjd
体坛名栏汇,http://localhost/mg.php?id=ttmjh
四海钓鱼,http://localhost/mg.php?id=shdy
咪咕24小时体育台,http://localhost/mg.php?id=mg24ss
新片放映厅,http://localhost/mg.php?id=xpfft
追剧少女,http://localhost/mg.php?id=zjsgn
CHC家庭影院,http://localhost/mg.php?id=chcjy
CHC动作电影,http://localhost/mg.php?id=chcdx
热剧联播,http://localhost/mg.php?id=rjlb
高清大片,http://localhost/mg.php?id=gdp
咪咕云上电影院,http://localhost/mg.php?id=mgysy
江苏教育,http://localhost/mg.php?id=jsjy
山东教育,http://localhost/mg.php?id=sdjy
熊猫频道高清,http://localhost/mg.php?id=xmpdgt
熊猫频道1,http://localhost/mg.php?id=xmpd1
熊猫频道2,http://localhost/mg.php?id=xmpd2
熊猫频道3,http://localhost/mg.php?id=xmpd3
熊猫频道4,http://localhost/mg.php?id=xmpd4
熊猫频道5,http://localhost/mg.php?id=xmpd5
熊猫频道6,http://localhost/mg.php?id=xmpd6
熊猫频道7,http://localhost/mg.php?id=xmpd7
熊猫频道8,http://localhost/mg.php?id=xmpd8
熊猫频道9,http://localhost/mg.php?id=xmpd9
熊猫频道10,http://localhost/mg.php?id=xmpd10
Y+,http://localhost/mg.php?id=ypjy
嵊泗新闻综合,http://localhost/mg.php?id=ssxwzh
普陀电视台,http://localhost/mg.php?id=ptds
杭州综合,http://localhost/mg.php?id=hzzh
杭州西湖明珠,http://localhost/mg.php?id=hzxhmm
杭州生活高清,http://localhost/mg.php?id=hzshgq
杭州影视,http://localhost/mg.php?id=hzys
杭州少儿,http://localhost/mg.php?id=hzet
衢州公共频道,http://localhost/mg.php?id=qzggpd
*/
